@page "/test"
@inject HttpWrapper Http
@inject JsHelper Js

<div class="row">
    <button class="btn btn-primary full-width" @onclick="GetAllUsers">Get all users</button>
</div>
<div class="row">
    <p>@CurrentUser.FullUserName</p>
</div>

@code {
    private User CurrentUser;

    protected async override void OnInitialized()
    {
        CurrentUser = new User();
        string res = await Js.ReadCookie(GlobalVariables.TokenCookieName);
        Http.AddJwtAuthentication(res);
    }
    
    private async void GetAllUsers()
    {
        CurrentUser = await Http.GetResultAsync<User>("Users/currentuser");
        StateHasChanged();
    }
}
